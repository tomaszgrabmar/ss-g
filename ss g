javascript:(function(){let active=false;let selected="10:30-12:30";let delay=1000;function log(t){console.log("[AutoSlot]",t);document.getElementById("slotStatus").innerText=t}function runCycle(){if(!active)return;const now=new Date();const today=now.toISOString().split("T")[0];const[h1,h2]=selected.split("-");const expectedStart=`${today} ${h1}`;const expectedEnd=`${today} ${h2}`;const rows=document.querySelectorAll("table.q-table tbody tr");let clicked=false;for(const row of rows){const tds=row.querySelectorAll("td");if(tds.length<5)continue;const s=tds[3].innerText.trim();const e=tds[4].innerText.trim();if(s===expectedStart&&e===expectedEnd){const btn=row.querySelector("button");if(btn){btn.click();clicked=true;log("🎯 Złapano slot!");alert("🎉 Złapano slot!");active=false;return}}}if(!clicked){log("❌ Brak slotu – próba ponownie za "+delay/1000+"s");const refreshBtn=document.querySelector("i.fas.fa-sync")?.parentElement;if(refreshBtn){refreshBtn.click();setTimeout(()=>{document.querySelectorAll("div.text-h6").forEach(el=>{if(el.innerText.includes("Nastąpi za"))el.remove()});document.querySelectorAll(%27div[id^="q-portal--dialog--"]%27).forEach(m=>m.remove())},100);setTimeout(runCycle,delay)}else{log("⚠%EF%B8%8F Nie znaleziono przycisku odświeżania.");setTimeout(runCycle,delay)}}}function createGUI(){if(document.getElementById("slotGUI"))return;const d=document.createElement("div");d.id="slotGUI";d.style="position:fixed;top:10px;right:10px;background:white;z-index:9999;border:1px solid #ccc;padding:10px;font-family:sans-serif;box-shadow:0 0 10px rgba(0,0,0,0.3)";const delayOptions=Array.from({length:15},(_,i)=>{const ms=(i+1)*1000;return%60<option value="${ms}" ${ms===1000?"selected":""}>${ms} ms</option>%60}).join("");d.innerHTML=%60<b>AutoSlot</b><br>Godzina:<br><select id="slotTime"><option>00:30-02:30</option><option>02:30-04:30</option><option>04:30-06:30</option><option>06:30-08:30</option><option>08:30-10:30</option><option selected>10:30-12:30</option><option>12:30-14:30</option><option>14:30-16:30</option><option>16:30-18:30</option><option>18:30-20:30</option><option>20:30-22:30</option><option>22:30-00:30</option></select><br>Opóźnienie:<br><select id="slotDelay">${delayOptions}</select><br><button id="slotStart">Start</button> <button id="slotStop">Stop</button><div id="slotStatus" style="margin-top:5px;font-size:12px;color:#888;">Gotowy</div>%60;document.body.appendChild(d);document.getElementById("slotStart").onclick=()=>{selected=document.getElementById("slotTime").value;delay=parseInt(document.getElementById("slotDelay").value);active=true;log("🔄 Startuję cykl...");runCycle()};document.getElementById("slotStop").onclick=()=>{active=false;log("🛑 Klikacz zatrzymany.")}}createGUI();})();
